allOf:
  - $ref: './Order.yaml'
  - type: object
    properties:
      currency:
        allOf:
          - $ref: '../../currencies/schemas/Currency.yaml'
          - type: object
            description: Валюта, в которой оформляется заказ
      customer:
        allOf:
          - $ref: '../../people/schemas/Person.yaml'
          - type: object
            description: Покупатель
      recipient:
        allOf:
          - $ref: '../../people/schemas/Person.yaml'
          - type: object
            description: Получатель заказа
      adjustments:
        type: array
        description: Корректировки заказа
        items:
          allOf:
            - $ref: '../../adjustments/schemas/Adjustment.yaml'
            - type: object
              properties:
                label:
                  example: Укажи промокод "ПРАЗДНИК" и получи скидку 20% на весь заказ
                price:
                  allOf:
                    - $ref: '../../prices/schemas/Price.yaml'
                    - type: object
                      properties:
                        amount:
                          example: "-54.00"
      itemsTotal:
        allOf:
          - $ref: '../../prices/schemas/Price.yaml'
          - type: object
            properties:
              amount:
                example: "270.00"
      adjustmentsTotal:
        allOf:
          - $ref: '../../prices/schemas/Price.yaml'
          - type: object
            properties:
              amount:
                example: "-54.00"
      total:
        allOf:
          - $ref: '../../prices/schemas/Price.yaml'
          - type: object
            properties:
              amount:
                example: "216.00"
      shipment:
        allOf:
          - $ref: '../../shipments/schemas/Shipment.yaml'
          - type: object
            properties:
              rate:
                allOf:
                  - $ref: '../../shippingRates/schemas/ShippingRate.yaml'
                  - type: object
                    properties:
                      price:
                        allOf:
                          - $ref: '../../prices/schemas/Price.yaml'
                          - type: object
                            properties:
                              amount:
                                example: "50.00"
                      shippingMethod:
                        $ref: '../../shippingMethods/schemas/ShippingMethod.yaml'
              deliveryAddress:
                $ref: '../../deliveryAddresses/schemas/DeliveryAddress.yaml'
              pickupPoint:
                allOf:
                  - $ref: '../../pickupPoints/schemas/PickupPoint.yaml'
                  - type: object
                    properties:
                      location:
                        $ref: '../../locations/schemas/Location.yaml'
              adjustments:
                type: array
                description: Корректировки заказа
                items:
                  allOf:
                    - $ref: '../../adjustments/schemas/Adjustment.yaml'
                    - type: object
                      properties:
                        label:
                          example: Оформите заказ более чем на 100 рублей, и мы выполним доставку бесплатно
                        price:
                          allOf:
                            - $ref: '../../prices/schemas/Price.yaml'
                            - type: object
                              properties:
                                amount:
                                  example: "-50.00"
              originalPrice:
                allOf:
                  - $ref: '../../prices/schemas/Price.yaml'
                  - type: object
                    properties:
                      amount:
                        example: "50.00"
              adjustmentsTotal:
                allOf:
                  - $ref: '../../prices/schemas/Price.yaml'
                  - type: object
                    properties:
                      amount:
                        example: "-50.00"
              total:
                allOf:
                  - $ref: '../../prices/schemas/Price.yaml'
                  - type: object
                    properties:
                      amount:
                        example: "00.00"
      payment:
        allOf:
          - $ref: '../../payments/schemas/Payment.yaml'
          - type: object
            properties:
              method:
                $ref: '../../paymentMethods/schemas/PaymentMethod.yaml'
              total:
                allOf:
                  - $ref: '../../prices/schemas/Price.yaml'
                  - type: object
                    properties:
                      amount:
                        example: "216.00"
